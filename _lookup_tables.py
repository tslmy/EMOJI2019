# Prepare lookup tables
import pandas as pd

try:
    wiki_df = pd.read_csv('Wikipedia_list_of_emojis.csv')
except:
    wiki_df = pd.read_html('https://commons.wikimedia.org/wiki/Data:Emoji.tab')[0]
    wiki_df.columns = ['emj', 'unicode', 'name', 'kw']
    wiki_df.to_csv('Wikipedia_list_of_emojis.csv', index=False)
emj2unicode = wiki_df.set_index('emj').unicode
unicode2emj = wiki_df.set_index('unicode').emj

try:
    emj_ucCtgy = pd.read_csv('Unicode_list_of_emojis.csv').set_index('emoji').category
except:
    html_df = pd.read_html('https://unicode.org/emoji/charts/full-emoji-list.html')[0]
    df = html_df[[0, 1, 2, 14]]
    df.columns = ['name', 'unicode', 'emoji', 'description']
    index_titles = df.isna().any(axis=1)
    titles_df = df[index_titles]
    titles = titles_df[titles_df.name.str.istitle()].name
    wCate_df = df.assign(category=titles.reindex(df.index).fillna(method='ffill')).dropna(how='any')
    wCate_df = wCate_df[wCate_df.name!='â„–'].drop('name', axis=1)
    wCate_df.to_csv('Unicode_list_of_emojis.csv', index=False)
    emj_ucCtgy = wCate_df.set_index('emoji').category
ucCtgys = ['Smileys & Emotion', 'People & Body', 'Animals & Nature', 'Food & Drink', 'Travel & Places', 'Activities', 'Objects', 'Symbols']

from glob import glob
emj_img_fpaths = pd.Series(glob('apple_emoji_images/*.png'), name='emj_img_fpath')
emj_img_codes = emj_img_fpaths.str[len('apple_emoji_images/'):].apply(lambda fpath: fpath[fpath.find('_')+1:-4]).rename('emj_img_code')
emj_img_codes.index = emj_img_fpaths
_ = emj_img_codes.str.startswith('emoji-modifier-fitzpatrick-type-')
emj_img_codes.loc[_] = emj_img_codes.loc[_].str[len('emoji-modifier-fitzpatrick-type-')+2:-6]
_ = emj_img_codes.str.startswith('2_')
emj_img_codes.loc[_] = emj_img_codes.loc[_].str[2:]
unicode2imgpath = emj_img_codes.reset_index().set_index('emj_img_code').emj_img_fpath
from matplotlib import pyplot as plt
unicode2img = unicode2imgpath.apply(plt.imread)

# Constants:
emjs_common = ['ğŸ“™', 'ğŸ¥', 'ğŸ”„', 'ğŸ‡', 'ğŸˆ', 'ğŸ¨', 'ğŸ‘', 'ğŸ”³', 'ğŸ', 'ğŸ“€', 'ğŸœ', 'ğŸ‘¾', 'ğŸ”†', 'ğŸ™', 'ğŸº', 'ğŸ”…', 'ğŸ‚', 'â˜¸', 'ğŸ“', 'ğŸŒ•', 'ğŸ“¦', 'ğŸ‡', 'â˜ ', 'ğŸ', 'ğŸ½', 'ğŸ˜', 'â˜¯', 'ğŸŒ¾', 'ğŸ”»', 'ğŸš§', 'ğŸ‘’', 'ğŸ„', 'ğŸ”', 'ğŸ‘¹', 'ğŸ”', 'ğŸ', 'ğŸ˜¾', 'ğŸš“', 'ğŸ¢', 'ğŸ‘', 'ğŸ‰', 'ğŸ”µ', 'ğŸ†“', 'ğŸ›', 'ğŸ¡', 'ğŸ“•', 'ğŸš‘', 'ğŸˆ‚', 'ğŸš¢', 'ğŸ”', 'ğŸ†', 'ğŸˆ¹', 'ğŸ‘', 'ğŸ‘„', 'ğŸ‘¥', 'ğŸƒ', 'ğŸ„', 'ğŸš¹', 'ğŸ»', 'ğŸŒ²', 'ğŸ”¯', 'ğŸ’¶', 'ğŸ‘·', 'â˜ƒ', 'ğŸ”°', 'â˜¹', 'â˜¢', 'ğŸ“Œ', 'ğŸ—½', 'ğŸ•›', 'ğŸ“˜', 'ğŸ¯', 'ğŸ‹', 'ğŸ’Š', 'ğŸ‘²', 'âœ', 'ğŸ ', 'ğŸ…', 'ğŸ…¾', 'ğŸ˜', 'ğŸ¯', 'ğŸŒ°', 'ğŸ”¸', 'ğŸ', 'ğŸŒ½', 'ğŸ’’', 'â™¥', 'ğŸ¨', 'ğŸ®', 'ğŸ–', 'ğŸ”¹', 'ğŸš', 'â©', 'ğŸ©', 'ğŸ„', 'ğŸ®', 'ğŸ•”', 'â°', 'ğŸ¡', 'ğŸ´', 'ğŸŒ‚', 'ğŸ“²', 'âœ”', 'ğŸ§', 'ğŸŒœ', 'âœ', 'ğŸ—¾', 'ğŸ¢', 'ğŸ«', 'ğŸ¦', 'ğŸ”œ', 'ğŸ', 'ğŸ•“', 'â˜‚', 'âœ…', 'ğŸ', 'ğŸµ', 'ğŸš‹', 'â•', 'ğŸ‚', 'ğŸ½', 'ğŸ’´', 'ğŸ”´', 'ğŸ’³', 'ğŸŒ', 'ğŸ¹', 'ğŸŒŒ', 'ğŸ¢', 'ğŸ•’', 'ğŸ’¿', 'ğŸŒ', 'ğŸš„', 'ğŸ‰', 'ğŸˆ²', 'ğŸ', 'ğŸ“£', 'ğŸ‘“', 'ğŸ›€', 'ğŸ””', 'ğŸ˜¯', 'ğŸ˜€', 'ğŸ‡', 'ğŸš«', 'ğŸš£', 'ğŸ’', 'ğŸŒ', 'ğŸ·', 'ğŸ™', 'ğŸŠ', 'ğŸ™', 'ğŸ³', 'ğŸˆ', 'ğŸ‹', 'ğŸ', 'ğŸš…', 'ğŸŒ', 'ğŸ‘˜', 'ğŸ‹', 'ğŸ‘±', 'âœ¡', 'ğŸ—¼', 'ğŸ•§', 'ğŸ‘³', 'ğŸ¶', 'ğŸšª', 'ğŸ’¯', 'ğŸ•', 'ğŸ¨', 'ğŸ‘š', 'ğŸš€', 'ğŸ‡', 'ğŸ˜¸', 'â', 'ğŸ†', 'ğŸ…', 'ğŸ…', 'ğŸ‚', 'ğŸŒ', 'ğŸ', 'ğŸ¼', 'ğŸ†•', 'ğŸ˜›', 'ğŸŒ‹', 'ğŸŒ±', 'ğŸ’ ', 'ğŸ‘–', 'â°', 'âš›', 'ğŸ¸', 'ğŸƒ', 'ğŸº', 'ğŸš˜', 'ğŸ‘½', 'ğŸ˜¹', 'ğŸš‡', 'ğŸ', 'ğŸˆ', 'â˜®', 'ğŸ˜º', 'ğŸ™‰', 'ğŸŒ', 'ğŸ¥', 'â•', 'ğŸ‘œ', 'ğŸ', 'ğŸ¤', 'ğŸ‘', 'ğŸ—', 'ğŸšº', 'â”', 'ğŸ¥', 'ğŸ“š', 'ğŸ”§', 'ğŸšƒ', 'ğŸ‘µ', 'ğŸ˜—', 'ğŸ¯', 'ğŸ‘®', 'ğŸ’®', 'ğŸ‘', 'ğŸ‘¿', 'ğŸ©', 'ğŸ’‡', 'ğŸ´', 'ğŸ’º', 'ğŸ', 'ğŸ˜¼', 'ğŸ§', 'â™€', 'ğŸŒ³', 'ğŸ‘¬', 'ğŸš¬', 'ğŸ‘ƒ', 'ğŸ±', 'ğŸ£', 'ğŸš¥', 'ğŸ‘°', 'ğŸ¸', 'ğŸ‘•', 'ğŸšš', 'ğŸŒš', 'ğŸš­', 'ğŸš¿', 'ğŸŒ„', 'ğŸª', 'ğŸŠ', 'ğŸ¡', 'ğŸ³', 'ğŸ“±', 'ğŸŒŠ', 'ğŸ†š', 'ğŸ‘›', 'ğŸ‘†', 'ğŸ¤', 'ğŸ˜½', 'ğŸ”›', 'ğŸš', 'ğŸ‘', 'ğŸ‘‡', 'ğŸ‘£', 'ğŸ¾', 'ğŸš¸', 'ğŸ”±', 'ğŸ•¥', 'ğŸŒ¿', 'ğŸ”ª', 'ğŸ’£', 'ğŸš', 'ğŸ­', 'ğŸ†', 'ğŸ°', 'ğŸ„', 'ğŸ”™', 'ğŸ˜§', 'ğŸ¬', 'ğŸ¬', 'ğŸ•¢', 'ğŸ’»', 'ğŸ“', 'ğŸ‘ª', 'ğŸ”‘', 'ğŸ²', 'ğŸ“', 'ğŸ“¯', 'ğŸ¹', 'ğŸ‘¨', 'Â©', 'ğŸš', 'ğŸ˜¶', 'ğŸ«', 'ğŸš•', 'ğŸ˜¦', 'ğŸ ', 'ğŸ”¶', 'ğŸŒ…', 'ğŸš™', 'ğŸŒ', 'ğŸ’€', 'ğŸ“—', 'ğŸ‘¦', 'ğŸŸ', 'ğŸ³', 'ğŸš²', 'ğŸš‰', 'ğŸ‘‚', 'ğŸ¹', 'ğŸµ', 'ğŸ”', 'ğŸ“', 'ğŸ†—', 'ğŸ“', 'ğŸ’‰', 'ğŸ©', 'ğŸ¨', 'ğŸ’¬', 'ğŸª', 'ğŸ›', 'ğŸ¦', 'ğŸ†˜', 'ğŸ˜Ÿ', 'ğŸ‘©', 'ğŸ˜™', 'ğŸ˜¿', 'ğŸ•–', 'ğŸ”Š', 'ğŸ¬', 'ğŸ‘»', 'ğŸ”', 'ğŸ£', 'ğŸš¼', 'â™‚', 'âŒ', 'ğŸ••', 'â¿', 'ğŸ†™', 'ğŸ˜¬', 'ğŸŒƒ', 'ğŸšŒ', 'ğŸ•', 'ğŸŒ·', 'ğŸ’', 'ğŸš¨', 'ğŸ™', 'ğŸš¶', 'ğŸ‘´', 'ğŸ', 'ğŸ”ƒ', 'ğŸ—', 'ğŸ®', 'âšœ', 'ğŸ…°', 'ğŸŒ ', 'Â®', 'ğŸ¢', 'ğŸŒ', 'ğŸ§', 'ğŸ˜ˆ', 'ğŸ£', 'ğŸ’¾', 'ğŸ”º', 'ğŸ˜', 'ğŸŒ›', 'ğŸ‘”', 'ğŸ·', 'ğŸ’†', 'ğŸ‘§', 'ğŸŒ‡', 'ğŸ¾', 'ğŸš', 'ğŸ’¡', 'ğŸ“¢', 'ğŸ†', 'ğŸš‚', 'ğŸŸ', 'ğŸ’', 'ğŸ˜®', 'ğŸš¦', 'ğŸ˜•', 'ğŸ†”', 'ğŸ†–', 'ğŸ', 'â„¢', 'ğŸ‘¶', 'ğŸ¼', 'ğŸ¿', 'ğŸ²', 'ğŸ™€', 'ğŸš»', 'ğŸ‘¡', 'ğŸ‘¢', 'ğŸšœ', 'ğŸ‘Ÿ', 'ğŸ¡', 'ğŸ”«', 'ğŸ“º', 'ğŸŠ', 'ğŸ•‘', 'ğŸ', 'ğŸš†', 'ğŸ˜œ', 'ğŸ–', 'ğŸ†’', 'ğŸ‘™', 'ğŸƒ', 'ğŸš', 'ğŸ¼', 'ğŸ”š', 'ğŸ®', 'ğŸ”©', 'ğŸš¤', 'ğŸ’ƒ', 'ğŸ‘', 'ğŸ“°', 'ğŸ”˜', 'ğŸ°', 'ğŸ’¢', 'ğŸ”½', 'ğŸ“©', 'ğŸˆµ', 'ğŸ­', 'ğŸ’¥', 'ğŸ›', 'ğŸ‘ ', 'ğŸ“»', 'ğŸ’ˆ', 'ğŸ’Œ', 'ğŸ”', 'ğŸ¥', 'ğŸ’©', 'ğŸ­', 'ğŸ•', 'ğŸ˜’', 'ğŸ“', 'ğŸ¦', 'ğŸ•˜', 'ğŸ”Œ', 'ğŸ¯', 'ğŸŒŸ', 'ğŸ’¤', 'ğŸ', 'ğŸ’‘', 'ğŸ™Š', 'âª', 'ğŸ•™', 'ğŸ§', 'ğŸª', 'ğŸ»', 'ğŸ˜ƒ', 'ğŸ˜»', 'ğŸš', 'ğŸ•¡', 'ğŸœ', 'ğŸ«', 'ğŸ“–', 'ğŸ˜', 'ğŸ”‹', 'ğŸ”­', 'ğŸ”®', 'ğŸ¬', 'ğŸ’°', 'ğŸ‘ˆ', 'ğŸ ', 'ğŸ’§', 'ğŸ‰', 'ğŸŒ¼', 'ğŸšˆ', 'ğŸ—»', 'ğŸ’¸', 'ğŸ• ', 'â³', 'ğŸ¸', 'ğŸ•', 'ğŸ’Ÿ', 'ğŸ”’', 'ğŸšŠ', 'ğŸ˜‡', 'ğŸš–', 'ğŸ’„', 'ğŸ’', 'ğŸ˜²', 'ğŸ‘‰', 'ğŸŒ™', 'ğŸˆ', 'ğŸŒˆ', 'ğŸ°', 'ğŸ““', 'ğŸ“¼', 'ğŸ˜–', 'ğŸ€', 'ğŸ', 'ğŸ²', 'ğŸ“µ', 'ğŸš—', 'ğŸš’', 'ğŸ“‚', 'ğŸ“¡', 'ğŸ€', 'ğŸ’', 'ğŸ”¥', 'ğŸš', 'ğŸ“ˆ', 'ğŸ˜ ', 'ğŸ‘…', 'ğŸ†‘', 'ğŸ€', 'ğŸ’¼', 'ğŸ”ˆ', 'ğŸ’', 'ğŸ¦', 'ğŸ·', 'ğŸ˜†', 'ğŸ‘¸', 'ğŸ±', 'ğŸ”‰', 'ğŸŒ¹', 'ğŸ™‹', 'ğŸ‘Œ', 'ğŸº', 'ğŸ’ª', 'ğŸ’', 'ğŸŒ€', 'ğŸ˜¡', 'ğŸ’š', 'ğŸŒ‰', 'ğŸ˜°', 'ğŸ“¶', 'ğŸš·', 'ğŸ»', 'ğŸ‘«', 'ğŸ˜¤', 'ğŸ™…', 'ğŸ‘­', 'ğŸ‘', 'ğŸ“', 'ğŸ˜„', 'ğŸ“¹', 'ğŸ“Ÿ', 'ğŸ™‡', 'ğŸŒº', 'ğŸŒ´', 'ğŸ˜¨', 'ğŸŒ†', 'ğŸ’…', 'ğŸ’', 'ğŸŒ', 'ğŸ˜´', 'ğŸŒ»', 'ğŸ‘‹', 'ğŸ”', 'ğŸ˜ª', 'ğŸ±', 'ğŸ’¨', 'â¬', 'ğŸ‰', 'ğŸ’™', 'â˜˜', 'ğŸ’›', 'ğŸ‘—', 'ğŸ˜š', 'ğŸ˜µ', 'ğŸƒ', 'ğŸ‘¼', 'ğŸ’½', 'ğŸ˜·', 'ğŸ”¦', 'ğŸ’œ', 'ğŸ˜Œ', 'ğŸ”', 'ğŸ˜¥', 'ğŸ’­', 'âš”', 'ğŸ’«', 'ğŸš”', 'ğŸ‚', 'ğŸ”“', 'ğŸ’²', 'ğŸ™†', 'ğŸ“·', 'ğŸ‘‘', 'ğŸš¡', 'ğŸ˜‰', 'â“', 'ğŸ‰', 'ğŸ¶', 'ğŸ’', 'ğŸ’˜', 'ğŸ™', 'ğŸ˜', 'ğŸ˜', 'ğŸ™ˆ', 'ğŸ˜…', 'ğŸ£', 'ğŸ˜', 'ğŸˆ', 'ğŸ’‹', 'ğŸ™Œ', 'ğŸ’·', 'ğŸ˜£', 'ğŸ‘', 'ğŸ˜«', 'ğŸ˜', 'ğŸ°', 'ğŸ˜±', 'ğŸ¤', 'ğŸ‘¯', 'ğŸ˜', 'ğŸ˜³', 'ğŸ’”', 'ğŸ˜“', 'ğŸ˜‚', 'ğŸ‘€', 'ğŸ’–', 'ğŸµ', 'ğŸŒ¸', 'âœ¨', 'ğŸ’', 'ğŸ’µ', 'ğŸ˜‘', 'ğŸ˜˜', 'âœŠ', 'ğŸ’¦', 'ğŸ˜­', 'ğŸ’“', 'ğŸ¶', 'ğŸ˜”', 'ğŸ’—', 'ğŸ˜Š', 'ğŸ‘Š', 'ğŸ’•', 'âœ‹', 'ğŸ˜©', 'ğŸ˜¢', 'ğŸ´', 'ğŸ˜‹']
basic_emotion_tokens = ["ğŸ˜Š", "ğŸ˜¢", "ğŸ˜±", "ğŸ˜¡", "ğŸ˜²"]
emjs_face            = ["ğŸ˜€", "ğŸ˜", "ğŸ˜‚", "ğŸ¤£", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜…", "ğŸ˜†", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜‹", "ğŸ˜", "ğŸ˜", "ğŸ˜˜", "ğŸ˜—", "ğŸ˜™", "ğŸ˜š", "â˜º", "ğŸ™‚", "ğŸ¤—", "ğŸ¤©", "ğŸ¤”", "ğŸ¤¨", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ™„", "ğŸ˜", "ğŸ˜£", "ğŸ˜¥", "ğŸ˜®", "ğŸ¤", "ğŸ˜¯", "ğŸ˜ª", "ğŸ˜«", "ğŸ˜´", "ğŸ˜Œ", "ğŸ˜›", "ğŸ˜œ", "ğŸ˜", "ğŸ¤¤", "ğŸ˜’", "ğŸ˜“", "ğŸ˜”", "ğŸ˜•", "ğŸ™ƒ", "ğŸ¤‘", "ğŸ˜²", "â˜¹", "ğŸ™", "ğŸ˜–", "ğŸ˜", "ğŸ˜Ÿ", "ğŸ˜¤", "ğŸ˜¢", "ğŸ˜­", "ğŸ˜¦", "ğŸ˜§", "ğŸ˜¨", "ğŸ˜©", "ğŸ¤¯", "ğŸ˜¬", "ğŸ˜°", "ğŸ˜±", "ğŸ˜³", "ğŸ¤ª", "ğŸ˜µ", "ğŸ˜¡", "ğŸ˜ ", "ğŸ¤¬", "ğŸ˜·", "ğŸ¤’", "ğŸ¤•", "ğŸ¤¢", "ğŸ¤®", "ğŸ¤§", "ğŸ˜‡", "ğŸ¤ ", "ğŸ¤¡", "ğŸ¤¥", "ğŸ¤«", "ğŸ¤­", "ğŸ§", "ğŸ¤“"]

liwc_top_lv_ctgys = ['Funct', 'Social', 'Affect', 'Cogmech', 'Percept', 'Bio', 'Relativ', 'Personal Concerns', 'Swear', 'Assent']
liwc_categories = \
{'Hear': 'Perceptual processes', 
'Ingest': 'Biological processes', 
'Anger': 'Psychological Processes', 
'Anx': 'Psychological Processes', 
'Body': 'Biological processes', 
'Negemo': 'Psychological Processes', 
'Money': 'Personal concerns', 
'Posemo': 'Psychological Processes',
'Cause': 'Cognitive processes', 
'Motion': 'Relativity', 
'Sexual': 'Biological processes', 
'Quant': 'Other Grammar', 
'Leisure': 'Personal concerns', 
'Certain': 'Cognitive processes', 
'Tentat': 'Cognitive processes',
'Home': 'Personal concerns', 
'See': 'Perceptual processes', 
'Sad': 'Psychological Processes', 
'Work': 'Personal concerns', 
'Death': 'Personal concerns', 
'Family': 'Social processes', 
'Number': 'Other Grammar', 
'Time': 'Relativity',
'Feel': 'Perceptual processes', 
'Negate': 'Linguistic Dimensions', 
'Space': 'Relativity', 
'Relig': 'Personal concerns', 
'Friend': 'Social processes', 
'Health': 'Biological processes', 
'Discrep': 'Cognitive processes',
'Insight': 'Cognitive processes'}